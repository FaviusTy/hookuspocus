!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((t=t||self).hookuspocus={})}(this,function(t){"use strict";function n(t,n){if(t!==n)throw new TypeError("Cannot instantiate an arrow function")}function e(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=[],i=!0,o=!1,r=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(e.push(a.value),!n||e.length!==n);i=!0);}catch(t){o=!0,r=t}finally{try{i||null==u.return||u.return()}finally{if(o)throw r}}return e}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var i=Symbol("outside_run"),o=i,r=new(WeakMap||Map),a=function(){n(this,void 0),o=i}.bind(void 0),u=function(t){n(this,void 0);var e=r.get(o.context);void 0===e[o.hookStateIndex]&&(e[o.hookStateIndex]={});var i=e[o.hookStateIndex],a=o.onStateChange;return{onCleanUp:function(t){i.cleanUp=t},beforeNextRun:function(t){i.beforeNextRun=t},afterCurrentRun:function(t){i.afterCurrentRun=t},getContext:function(){return o.context},getState:function(t){return void 0===i.state&&(i.state=t),i.state},setState:function(n){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=i.state;i.state=n,!e&&a&&a(t,o,n)}}}.bind(void 0),f=function(t,e){var r=this;return n(this,void 0),function(){if(n(this,r),o.context===i)throw new Error("Hook was called outside of run()!");o.hookStateIndex++;for(var a=u(t),f=arguments.length,s=new Array(f),c=0;c<f;c++)s[c]=arguments[c];return e.apply(void 0,s.concat([a]))}.bind(this)}.bind(void 0);function s(t,n,e){for(var i=e;i--;){var o=n[e-i-1];o[t]&&(o[t](),o[t]=void 0)}}var c=function(t){n(this,void 0);var e=r.get(t);s("cleanUp",e,e.length)}.bind(void 0),d=function(t){n(this,void 0);var e=r.get(t);s("cleanUp",e,e.length),r.delete(t)}.bind(void 0),h=function(t){var e,i=this;if(n(this,void 0),"function"==typeof t&&(t={context:t,function:t}),!(t.context instanceof Object))throw new Error("Run was called without a valid object context!");(o=t).hookStateIndex=-1;var u=!1;r.has(o.context)||(r.set(o.context,[]),u=!0);var f=r.get(o.context),c=f.length;s("beforeNextRun",f,c);for(var d=arguments.length,h=new Array(d>1?d-1:0),v=1;v<d;v++)h[v-1]=arguments[v];var l=(e=t).function.apply(e,h);return l instanceof Promise?l.then(function(t){return n(this,i),s("afterCurrentRun",f,u?f.length:c),a(),t}.bind(this)):(s("afterCurrentRun",f,u?f.length:c),a(),l)}.bind(void 0),v=f("useReducer",function(t,e,i){var o=this,r=i.getState,a=i.setState;n(this,void 0);var u=r(e);return[u,function(e){n(this,o),a(t(u,e))}.bind(this)]}.bind(void 0)),l=f("useState",function(t){var i=this;n(this,void 0);var o=e(v(function(t,e){return n(this,i),e.value}.bind(this),t),2),r=o[0],a=o[1];return[r,function(t){return n(this,i),a({type:"set_state",value:t})}.bind(this)]}.bind(void 0)),p=f("useEffect",function(t){var e,i,o=this;n(this,void 0),(arguments.length<=1?0:arguments.length-1)>1&&(i=arguments.length<=1?void 0:arguments[1]);var r=(e=(arguments.length<=1?0:arguments.length-1)-1+1)<1||arguments.length<=e?void 0:arguments[e],a=r.getState,u=r.setState,f=r.onCleanUp,s=r.afterCurrentRun,c=a({}),d=c.values,h=c.cleanUp,v=!1;if(d!==i&&d&&d.length>0){v=!0;for(var l=d.length;l--;)if(i[l]!==d[l]){v=!1;break}d=i}v||(h&&h(),s(function(){var e=this;n(this,o),h=t(),u({values:i,cleanUp:h}),f(h?function(){n(this,e),h()}.bind(this):void 0)}.bind(this)))}.bind(void 0));t.createHook=f,t.cleanUp=c,t.dispose=d,t.run=h,t.useReducer=v,t.useState=l,t.useEffect=p,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map