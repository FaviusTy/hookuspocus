var n,t,e=[],r=new(WeakMap||Map),u=new(WeakMap||Map),o=function(u){return function o(){var f=e[t][++n]||(e[t][n]=[{context:e[t][0],hook:u}]);return(r.get(o)||u).apply({},f.concat(Array.from(arguments)))}},f=function(n,r){var o=e[t].map(function(n){if(n[0]&&n[0][r]){var t=n[0][r]();return n[0][r]=0,t}}).filter(function(n){return n instanceof Promise});if(o.length>0){var f=Promise.all(o);u.set(n,u.has(n)?u.get(n).then(f):f)}},a=function(n,t){if(u.has(n)){var e=u.get(n).then(t);return u.set(n,e),e}return t()},i=function(){var o,i=Array.from(arguments);return i[0].pop&&(o=i.shift()),function(o,i,c,s){if(!0!==i)return a(o,function(){return n=0,t=e.push(r.get(o)||[o])-1,r.set(o,e[t]),f(o,"before"),a(o,function(){var n=c.apply(c,s);return f(o,"after"),a(o,function(){return e.pop(),u.delete(o),n})})});u.set(o,f(o,"cleanUp")),r.delete(o)}("boolean"==typeof i[1]?i[0]:i[1]||i[0],!0===i[1]||i[2],i[0],o)},c=o(function(n,t,e,r){return n.s=void 0!==n.s?n.s:r?r(e):e,[n.s,function(e){return n.s=t(n.s,e),n.s}]}),s=function(n,t){r.set(n,t)},p=o(function(n,t,e){n.v&&(!e||e.length===n.v.length&&e.every(function(t){return~n.v.indexOf(t)}))||(n.v=e,n.cleanUp&&n.cleanUp(),n.after=function(){var e=t();return e instanceof Promise?e=e.then(function(t){return n.cleanUp=t}):n.cleanUp=e,e})});exports.on=s,exports.onStateChanged=function(n){return s(c,function(t,e,r,u){var o=t.hook(t,e,r,u),f=o[0],a=o[1];return[f,function(e){var r=a(e);return f!==r&&n(t.context),r}]})},exports.hookus=o,exports.pocus=i,exports.useLayoutEffect=p,exports.useEffect=function(n,t){p(function(){return new Promise(function(t){return requestAnimationFrame(function(e){return t(n())})})},t)},exports.useReducer=c,exports.useState=function(n){var t=c(function(n,t){return t.value},n),e=t[1];return[t[0],function(n){return e({value:n})}]},exports.fidibus=function(n,t){var e=function(){var e=Array.from(arguments);return e.length>0?i(e,n,t):i(n,t)};return e.cleanUp=function(){i(n,t,!0)},e};
//# sourceMappingURL=hookuspocus.js.map
