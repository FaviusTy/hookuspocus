var n,t,e=[],r=new(WeakMap||Map),o=window.___hookusPocusRunMap||new(WeakMap||Map);window.___hookusPocusRunMap=o;var u=function(o){return function u(){var a=e[t][++n]||(e[t][n]=[{context:e[t][0],hook:o}]);return(r.get(u)||o).apply({},a.concat(Array.from(arguments)))}},a=function(n,r){var u=e[t].map(function(n){if(n[0]&&n[0][r]){var t=n[0][r]();return n[0][r]=0,t}}).filter(function(n){return n instanceof Promise});if(u.length>0){var a=Promise.all(u);o.set(n,o.has(n)?o.get(n).then(a):a)}},f=function(n,t){if(o.has(n)){var e=o.get(n).then(t);return o.set(n,e),e}return t()},i=function(){var u,i=Array.from(arguments);return i[0].pop&&(u=i.shift()),function(u,i,c,s){if(!0!==i)return f(u,function(){return n=0,t=e.push(r.get(u)||[u])-1,r.set(u,e[t]),a(u,"before"),f(u,function(){var n=c.apply(c,s);return a(u,"after"),f(u,function(){return e.pop(),o.delete(u),n})})});o.set(u,a(u,"cleanUp")),r.delete(u)}("boolean"==typeof i[1]?i[0]:i[1]||i[0],!0===i[1]||i[2],i[0],u)},c=u(function(n,t,e,r){return n.s=void 0!==n.s?n.s:r?r(e):e,[n.s,function(e){return n.s=t(n.s,e),n.s}]}),s=function(n,t){r.set(n,t)},p=u(function(n,t,e){n.v&&(!e||e.length===n.v.length&&e.every(function(t){return~n.v.indexOf(t)}))||(n.v=e,n.cleanUp&&n.cleanUp(),n.after=function(){var e=t();return e instanceof Promise?e=e.then(function(t){return n.cleanUp=t}):n.cleanUp=e,e})});exports.on=s,exports.onStateChanged=function(n){return s(c,function(t,e,r,o){var u=t.hook(t,e,r,o),a=u[0],f=u[1];return[a,function(e){var r=f(e);return a!==r&&n(t.context),r}]})},exports.hookus=u,exports.pocus=i,exports.useLayoutEffect=p,exports.useEffect=function(n,t){p(function(){return new Promise(function(t){return requestAnimationFrame(function(e){return t(n())})})},t)},exports.useReducer=c,exports.useState=function(n){var t=c(function(n,t){return t.value},n),e=t[1];return[t[0],function(n){return e({value:n})}]},exports.fidibus=function(n,t){var e=function(){var e=Array.from(arguments);return e.length>0?i(e,n,t):i(n,t)};return e.cleanUp=function(){i(n,t,!0)},e};
//# sourceMappingURL=hookuspocus.js.map
