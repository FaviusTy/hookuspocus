var n,t,r=[],e=new(WeakMap||Map),u=new(WeakMap||Map),o=function(u){return function o(){var f=r[t][++n]||(r[t][n]=[{context:r[t][0],hook:u}]);return(e.get(o)||u).apply({},f.concat(Array.from(arguments)))}},f=function(n,e){var o=r[t].map(function(n){if(n[0]&&n[0][e]){var t=n[0][e]();return n[0][e]=0,t}}).filter(function(n){return n instanceof Promise});if(o.length>0){var f=Promise.all(o);u.set(n,u.has(n)?u.get(n).then(f):f)}},i=function(n,t){if(u.has(n)){var r=u.get(n).then(t);return u.set(n,r),r}return t()},a=function(){var o,a=Array.from(arguments);return a[0].pop&&(o=a.shift()),function(o,a,c,s){if(!0!==a)return i(o,function(){return n=0,t=r.push(e.get(o)||[o])-1,e.set(o,r[t]),f(o,"before"),i(o,function(){var n=c.apply(c,s);return f(o,"after"),i(o,function(){return r.pop(),u.delete(o),n})})});u.set(o,f(o,"cleanUp")),e.delete(o)}("boolean"==typeof a[1]?a[0]:a[1]||a[0],!0===a[1]||a[2],a[0],o)},c=o(function(n,t,r,e){return n.s=void 0!==n.s?n.s:e?e(r):r,[n.s,function(r){return n.s=t(n.s,r),n.s}]}),s=function(n,t){e.set(n,t)},p=function(n){return s(c,function(t,r,e,u){var o=t.hook(t,r,e,u),f=o[0],i=o[1];return[f,function(r){var e=i(r);return f!==e&&n(t.context),e}]})},v=o(function(n,t,r){n.v&&(!r||r.length===n.v.length&&r.every(function(t){return~n.v.indexOf(t)}))||(n.v=r,n.cleanUp&&n.cleanUp(),n.after=function(){var r=t();return r instanceof Promise?r=r.then(function(t){return n.cleanUp=t}):n.cleanUp=r,r})}),l=function(n,t){v(function(){return new Promise(function(t){return requestAnimationFrame(function(r){return t(n())})})},t)},h=function(n){var t=c(function(n,t){return t.value},n),r=t[1];return[t[0],function(n){return r({value:n})}]},m=function(n,t){var r=function(){var r=Array.from(arguments);return r.length>0?a(r,n,t):a(n,t)};return r.cleanUp=function(){a(n,t,!0)},r};export{s as on,p as onStateChanged,o as hookus,a as pocus,v as useLayoutEffect,l as useEffect,c as useReducer,h as useState,m as fidibus};
//# sourceMappingURL=hookuspocus.mjs.map
